<html>
<script type="text/javascript" src="https://serratus.github.io/quaggaJS/examples/js/quagga.min.js"></script>
<body>
  <style>
    #sen1 {
      border: 4px solid red;
      width: 100px;
      height: 50px;
      width: 50%;
      height: 50%;
    }
  </style>
  <div id="interactive" class="viewport">
    <span id="sen1"></span>
  </div>

  <script src="./js/quaggaJS/dist/quagga.js"></script>
  <script>
    Quagga.init({
      inputStream: { type : 'LiveStream' },
        decoder: {
          readers: [{
            format: 'code_39_reader',
            config: {}
          }]
        }
      }, (err) => {
        if(!err) {
          Quagga.start();
        }
      });

    Quagga.onProcessed((result) => {
      if(result == null) return;
      if(typeof(result) !="object") return;
      if(result.boxes == underfined) return;
      const ctx = Quagga.canvas.ctx.overlay;
      const canvas = Quagga.canvas.dom.overlay;
      ctx.clearRect(0, 0, parseInt(canvas.width), parseInt(canvas.height));
      Quagga.ImageDebug.drawPath(result.box, {x: 0, y: 1}, ctx, {color: "blue", lineWidth: 5});
    });
    
    Quagga.onDetected((result) => {
      var code = result.codeResult.code;
      // ここでコードを受け取って、何かしらの処理(例えば、楽天市場APIを使用して商品検索等)
      alert(code);
    });
  </script>
</body>
</html>
